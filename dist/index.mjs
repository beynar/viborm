import{n as e,t}from"./client-BGGl44wE.mjs";import"./sql-CFtZ-oR0.mjs";import{n,r}from"./validation-zYF7-cPF.mjs";import{createId as i}from"@paralleldrive/cuid2";import{nanoid as a}from"nanoid";import{monotonicFactory as o}from"ulidx";const s=(e,t)=>({...e[`~`].state,...t}),c=(e,t)=>({type:e,nullable:!1,array:!1,hasDefault:!1,isId:!1,isUnique:!1,default:void 0,autoGenerate:void 0,schema:void 0,columnName:void 0,optional:!1,base:t}),l=e=>r.coerce(e,e=>({equals:e})),u=e=>r.coerce(e,e=>({set:e})),d=e=>r.coerce(e,e=>[e]),f=r.bigint();r.bigint({nullable:!0});const p=r.bigint({array:!0});r.bigint({array:!0,nullable:!0});const m=r.object({in:p,notIn:p,lt:f,lte:f,gt:f,gte:f}),h=e=>{let t=m.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},g=r.object({has:f,hasEvery:p,hasSome:p,isEmpty:r.boolean()}),_=e=>{let t=g.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},ee=e=>r.union([u(e),r.object({set:e,increment:f,decrement:f,multiply:f,divide:f})]),te=e=>r.union([u(e),r.object({set:e,push:r.union([d(f),p]),unshift:r.union([d(f),p])})]),ne=e=>({base:e.base,create:r.bigint(e),update:e.array?te(e.base):ee(e.base),filter:e.array?_(e.base):h(e.base)});var re=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e(s(this,{nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.bigint({nullable:!0,array:this.state.array})}),this._nativeType)}array(){return new e(s(this,{...this.state,array:!0,base:r.bigint({nullable:this.state.nullable,array:!0})}),this._nativeType)}id(){return new e(s(this,{isId:!0,isUnique:!0}),this._nativeType)}unique(){return new e(s(this,{isUnique:!0}),this._nativeType)}default(t){return new e(s(this,{hasDefault:!0,default:t,optional:!0}),this._nativeType)}schema(t){return new e(s(this,{schema:t,base:r.bigint({nullable:this.state.nullable,array:this.state.array,schema:t})}),this._nativeType)}map(t){return new e(s(this,{columnName:t}),this._nativeType)}increment(){return new e(s(this,{hasDefault:!0,autoGenerate:`increment`,default:0n,optional:!0}),this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=ne(this.state),nativeType:this._nativeType}}};const ie=e=>new re(c(`bigint`,f),e),ae=r.blob();r.blob({nullable:!0});const oe=e=>{let t=r.object({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},se=e=>r.union([u(e),r.object({set:e},{partial:!1})]),ce=e=>({base:e.base,create:r.blob(e),update:se(e.base),filter:oe(e.base)});var le=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.blob({nullable:!0})},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}array(){throw Error(`Blob fields don't support array modifier`)}id(){throw Error(`Blob fields cannot be used as IDs`)}unique(){throw Error(`Blob fields cannot be unique`)}get"~"(){return{state:this.state,schemas:this._schemas??=ce(this.state),nativeType:this._nativeType}}};const ue=e=>new le(c(`blob`,ae),e),v=r.boolean();r.boolean({nullable:!0});const y=r.boolean({array:!0});r.boolean({array:!0,nullable:!0});const de=e=>{let t=r.object({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},fe=r.object({has:v,hasEvery:y,hasSome:y,isEmpty:r.boolean()}),pe=e=>{let t=fe.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},me=e=>r.union([u(e),r.object({set:e},{partial:!1})]),he=e=>r.union([u(e),r.object({set:e,push:r.union([d(v),y]),unshift:r.union([d(v),y])})]),ge=e=>({base:e.base,create:r.boolean(e),update:e.array?he(e.base):me(e.base),filter:e.array?pe(e.base):de(e.base)});var _e=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.boolean({nullable:!0,array:this.state.array})},this._nativeType)}array(){return new e({...this.state,array:!0,base:r.boolean({nullable:this.state.nullable,array:!0})},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=ge(this.state),nativeType:this._nativeType}}};const ve=e=>new _e(c(`boolean`,v),e),b=r.isoTimestamp();r.isoTimestamp({nullable:!0});const x=r.isoTimestamp({array:!0});r.isoTimestamp({array:!0,nullable:!0});const S=r.isoDate();r.isoDate({nullable:!0});const C=r.isoDate({array:!0});r.isoDate({array:!0,nullable:!0});const w=r.isoTime();r.isoTime({nullable:!0});const T=r.isoTime({array:!0});r.isoTime({array:!0,nullable:!0});const ye=r.object({in:x,notIn:x,lt:b,lte:b,gt:b,gte:b}),be=e=>{let t=ye.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},xe=r.object({has:b,hasEvery:x,hasSome:x,isEmpty:r.boolean()}),Se=e=>{let t=xe.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},Ce=e=>r.union([u(e),r.object({set:e},{partial:!1})]),we=e=>r.union([u(e),r.object({set:e,push:r.union([d(b),x]),unshift:r.union([d(b),x])})]),Te=e=>({base:e.base,create:r.isoTimestamp(e),update:e.array?we(e.base):Ce(e.base),filter:e.array?Se(e.base):be(e.base)});r.object({in:C,notIn:C,lt:S,lte:S,gt:S,gte:S}),r.object({has:S,hasEvery:C,hasSome:C,isEmpty:r.boolean()}),r.object({in:T,notIn:T,lt:w,lte:w,gt:w,gte:w}),r.object({has:w,hasEvery:T,hasSome:T,isEmpty:r.boolean()});const Ee=()=>new Date().toISOString(),De=()=>new Date().toISOString();var Oe=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.isoTimestamp({nullable:!0,array:this.state.array})},this._nativeType)}array(){return new e({...this.state,array:!0,base:r.isoTimestamp({nullable:this.state.nullable,array:!0})},this._nativeType)}id(){return new e({...this.state,isId:!0,isUnique:!0},this._nativeType)}unique(){return new e({...this.state,isUnique:!0},this._nativeType)}schema(t){return new e({...this.state,schema:t,base:r.isoTimestamp({nullable:this.state.nullable,array:this.state.array,schema:t})},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}now(){return new e({...this.state,hasDefault:!0,autoGenerate:`now`,default:Ee,optional:!0},this._nativeType)}updatedAt(){return new e({...this.state,hasDefault:!0,autoGenerate:`updatedAt`,default:De,optional:!0},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=Te(this.state),nativeType:this._nativeType}}};const ke=e=>new Oe(c(`datetime`,b),e),E=r.number();r.number({nullable:!0});const D=r.number({array:!0});r.number({array:!0,nullable:!0});const Ae=r.object({in:D,notIn:D,lt:E,lte:E,gt:E,gte:E}),O=e=>{let t=Ae.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},je=r.object({has:E,hasEvery:D,hasSome:D,isEmpty:r.boolean()}),k=e=>{let t=je.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},A=e=>r.union([u(e),r.object({set:e,increment:E,decrement:E,multiply:E,divide:E})]),j=e=>r.union([u(e),r.object({set:e,push:r.union([d(E),D]),unshift:r.union([d(E),D])})]),Me=e=>({base:e.base,create:r.number(e),update:e.array?j(e.base):A(e.base),filter:e.array?k(e.base):O(e.base)}),Ne=r.number();r.number({nullable:!0}),r.number({array:!0}),r.number({array:!0,nullable:!0});const Pe=e=>({base:e.base,create:r.number(e),update:e.array?j(e.base):A(e.base),filter:e.array?k(e.base):O(e.base)});var Fe=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.number({nullable:!0,array:this.state.array})},this._nativeType)}array(){return new e({...this.state,array:!0,base:r.number({nullable:this.state.nullable,array:!0})},this._nativeType)}id(){return new e({...this.state,isId:!0,isUnique:!0},this._nativeType)}unique(){return new e({...this.state,isUnique:!0},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}schema(t){return new e({...this.state,schema:t,base:r.number({nullable:this.state.nullable,array:this.state.array,schema:t})},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=Pe(this.state),nativeType:this._nativeType}}};const Ie=e=>new Fe(c(`decimal`,Ne),e),M=e=>r.enum(e),N=e=>r.enum(e,{array:!0}),Le=(e,t)=>{let n=N(t),i=r.object({equals:e,in:n,notIn:n});return r.union([l(e),i.extend({not:r.union([l(e),i])})])},Re=(e,t)=>{let n=M(t),i=N(t),a=r.object({has:n,hasEvery:i,hasSome:i,isEmpty:r.boolean()}).extend({equals:e});return r.union([l(e),a.extend({not:r.union([l(e),a])})])},ze=e=>r.union([u(e),r.object({set:e},{partial:!1})]),Be=(e,t)=>{let n=M(t),i=N(t);return r.union([u(e),r.object({set:e,push:r.union([d(n),i]),unshift:r.union([d(n),i])})])},Ve=(e,t)=>({base:t.base,create:r.enum(e,t),update:t.array?Be(t.base,e):ze(t.base),filter:t.array?Re(t.base,e):Le(t.base,e)});var He=class e{constructor(e,t,n){this.values=e,this.state=t,this._nativeType=n}nullable(){return new e(this.values,{...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.enum(this.values,{nullable:!0,array:this.state.array})},this._nativeType)}array(){return new e(this.values,{...this.state,array:!0,base:r.enum(this.values,{nullable:this.state.nullable,array:!0})},this._nativeType)}default(t){return new e(this.values,{...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}map(t){return new e(this.values,{...this.state,columnName:t},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=Ve(this.values,this.state),nativeType:this._nativeType}}};const Ue=(e,t)=>new He(e,c(`enum`,r.enum(e)),t);var We=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.number({nullable:!0,array:this.state.array})},this._nativeType)}array(){return new e({...this.state,array:!0,base:r.number({nullable:this.state.nullable,array:!0})},this._nativeType)}id(){return new e({...this.state,isId:!0,isUnique:!0},this._nativeType)}unique(){return new e({...this.state,isUnique:!0},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}schema(t){return new e({...this.state,schema:t,base:r.number({nullable:this.state.nullable,array:this.state.array,schema:t})},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=Me(this.state),nativeType:this._nativeType}}};const Ge=e=>new We(c(`float`,E),e),P=r.integer();r.integer({nullable:!0});const F=r.integer({array:!0});r.integer({array:!0,nullable:!0});const Ke=r.object({in:F,notIn:F,lt:P,lte:P,gt:P,gte:P}),qe=e=>{let t=Ke.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},Je=r.object({has:P,hasEvery:F,hasSome:F,isEmpty:r.boolean()}),Ye=e=>{let t=Je.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},Xe=e=>r.union([u(e),r.object({set:e,increment:P,decrement:P,multiply:P,divide:P})]),Ze=e=>r.union([u(e),r.object({set:e,push:r.union([d(P),F]),unshift:r.union([d(P),F])})]),Qe=e=>({base:e.base,create:r.integer(e),update:e.array?Ze(e.base):Xe(e.base),filter:e.array?Ye(e.base):qe(e.base)});var $e=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.integer({nullable:!0,array:this.state.array})},this._nativeType)}array(){return new e({...this.state,array:!0,base:r.integer({nullable:this.state.nullable,array:!0})},this._nativeType)}id(){return new e({...this.state,isId:!0,isUnique:!0},this._nativeType)}unique(){return new e({...this.state,isUnique:!0},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}schema(t){return new e({...this.state,schema:t,base:r.integer({nullable:this.state.nullable,array:this.state.array,schema:t})},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}increment(){return new e({...this.state,hasDefault:!0,autoGenerate:`increment`,default:0,optional:!0},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=Qe(this.state),nativeType:this._nativeType}}};const et=e=>new $e(c(`int`,P),e),tt=r.json();r.json({nullable:!0});const nt=e=>{let t=r.object({equals:e,path:r.array(r.string()),string_contains:r.string(),string_starts_with:r.string(),string_ends_with:r.string(),array_contains:e,array_starts_with:e,array_ends_with:e});return t.extend({not:t})},rt=e=>r.coerce(e,e=>({set:e})),it=e=>({base:e.base,create:r.json(e),update:rt(e.base),filter:nt(e.base)});var at=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.json({nullable:!0,schema:this.state.schema})},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}schema(t){return new e({...this.state,schema:t,base:r.json({nullable:this.state.nullable,schema:t})},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=it(this.state),nativeType:this._nativeType}}};const ot=e=>new at(c(`json`,tt),e),I=o(),st=e=>()=>e?`${e}-${crypto.randomUUID()}`:crypto.randomUUID(),L=e=>()=>e?`${e}-${I()}`:I(),ct=(e,t)=>()=>t?`${t}-${a(e)}`:a(e),lt=e=>()=>e?`${e}-${i()}`:i(),R=r.string();r.string({nullable:!0});const z=r.string({array:!0});r.string({array:!0,nullable:!0});const ut=r.object({in:z,notIn:z,contains:R,startsWith:R,endsWith:R,mode:r.enum([`default`,`insensitive`])}),dt=e=>{let t=ut.extend({equals:e,lt:e,lte:e,gt:e,gte:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},ft=r.object({has:R,hasEvery:z,hasSome:z,isEmpty:r.boolean()}),pt=e=>{let t=ft.extend({equals:e});return r.union([l(e),t.extend({not:r.union([l(e),t])})])},mt=e=>r.union([u(e),r.object({set:e},{partial:!1})]),ht=e=>r.union([u(e),r.object({set:e,push:r.union([d(R),z]),unshift:r.union([d(R),z])})]),gt=e=>({base:e.base,create:r.string(e),update:e.array?ht(e.base):mt(e.base),filter:e.array?pt(e.base):dt(e.base)});var _t=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e(s(this,{nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.string({nullable:!0,array:this.state.array,schema:this.state.schema})}),this._nativeType)}array(){return new e(s(this,{array:!0,base:r.string({nullable:this.state.nullable,array:!0,schema:this.state.schema})}),this._nativeType)}id(t){return new e(s(this,{isId:!0,isUnique:!0,autoGenerate:`ulid`,default:L(t),optional:!0}),this._nativeType)}unique(){return new e(s(this,{isUnique:!0}),this._nativeType)}default(t){return new e(s(this,{hasDefault:!0,default:t,optional:!0}),this._nativeType)}schema(t){return new e({...this.state,schema:t,base:r.string({nullable:this.state.nullable,array:this.state.array,schema:t})},this._nativeType)}map(t){return new e(s(this,{columnName:t}),this._nativeType)}uuid(t){return new e(s(this,{hasDefault:!0,default:st(t),autoGenerate:`uuid`,optional:!0}),this._nativeType)}ulid(t){return new e(s(this,{hasDefault:!0,default:L(t),autoGenerate:`ulid`,optional:!0}),this._nativeType)}nanoid(t,n){return new e(s(this,{hasDefault:!0,default:ct(t,n),autoGenerate:`nanoid`,optional:!0}),this._nativeType)}cuid(t){return new e(s(this,{hasDefault:!0,default:lt(t),autoGenerate:`cuid`,optional:!0}),this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=gt(this.state),nativeType:this._nativeType}}};const vt=e=>new _t(c(`string`,R),e),yt=r.vector();r.vector(void 0,{nullable:!0});const bt=e=>r.coerce(e,e=>({cosine:e})),xt=e=>{let t=r.object({l2:e,cosine:e});return r.union([bt(e),t])},St=e=>r.union([u(e),r.object({set:e},{partial:!1})]),Ct=e=>({base:e.base,create:r.vector(void 0,e),update:St(e.base),filter:xt(e.base)});var wt=class e{constructor(e,t){this.state=e,this._nativeType=t}nullable(){return new e({...this.state,nullable:!0,hasDefault:!0,default:null,optional:!0,base:r.vector(void 0,{nullable:!0})},this._nativeType)}default(t){return new e({...this.state,hasDefault:!0,default:t,optional:!0},this._nativeType)}map(t){return new e({...this.state,columnName:t},this._nativeType)}dimension(t){return new e({...this.state,dimension:t},this._nativeType)}get"~"(){return{state:this.state,schemas:this._schemas??=Ct(this.state),nativeType:this._nativeType}}};const Tt=e=>new wt(c(`vector`,yt),e);function B(e){if(!e||typeof e!=`object`)return!1;let t=e;if(!t[`~`]?.state?.type)return!1;let n=t[`~`].state.type;return n===`oneToOne`||n===`oneToMany`||n===`manyToOne`||n===`manyToMany`}const V=e=>Object.entries(e).reduce((e,[t,n])=>(B(n)||(e[t]=n),e),{}),H=e=>Object.entries(e).reduce((e,[t,n])=>(B(n)&&(e[t]=n),e),{}),Et=e=>Object.entries(e).reduce((e,[t,n])=>(!B(n)&&(n[`~`].state.isUnique||n[`~`].state.isId)&&(e[t]=n),e),{}),Dt=(e,t)=>e??t.join(`_`),Ot=(e,t)=>{for(let[n,r]of Object.entries(e.scalars))t(n,r)},kt=e=>{let t=[`_all`],n=[],i=[];Ot(e,(e,r)=>{let a=r[`~`].state.type;t.push(e),[`int`,`float`,`decimal`,`bigint`].includes(a)&&n.push(e),i.push(e)});let a=r.boolean({optional:!0});return{count:r.fromKeys(t,a),avg:r.fromKeys(n,a),sum:r.fromKeys(n,a),min:r.fromKeys(i,a),max:r.fromKeys(i,a)}},At=e=>r.object({where:e.where,cursor:e.whereUnique,take:r.number(),skip:r.number()},{optional:!0}),jt=(e,t)=>{let n=kt(e);return r.object({where:t.where,orderBy:r.union([t.orderBy,r.array(t.orderBy)]),cursor:t.whereUnique,take:r.number(),skip:r.number(),_count:r.union([r.literal(!0),n.count]),_avg:n.avg,_sum:n.sum,_min:n.min,_max:n.max})},Mt=(e,t)=>{let n=Object.keys(e.scalars),i=r.enum(n),a=kt(e);return r.object({by:r.union([i,r.array(i)]),where:t.where,having:t.where,orderBy:r.union([t.orderBy,r.array(t.orderBy)]),take:r.number(),skip:r.number(),_count:r.union([r.literal(!0),a.count]),_avg:a.avg,_sum:a.sum,_min:a.min,_max:a.max},{atLeast:[`by`]})},Nt=e=>r.object({where:e.whereUnique,select:e.select,include:e.include},{atLeast:[`where`]}),Pt=e=>r.object({where:e.where,orderBy:r.union([e.orderBy,r.array(e.orderBy)]),take:r.number(),skip:r.number(),cursor:e.whereUnique,select:e.select,include:e.include},{optional:!0}),Ft=(e,t)=>{let n=Object.keys(e.scalars);return r.object({where:t.where,orderBy:r.union([t.orderBy,r.array(t.orderBy)]),take:r.number(),skip:r.number(),cursor:t.whereUnique,select:t.select,include:t.include,distinct:r.enum(n,{array:!0})},{optional:!0})},It=e=>r.object({data:e.create,select:e.select,include:e.include},{atLeast:[`data`]}),Lt=e=>r.object({data:r.array(e.scalarCreate),skipDuplicates:r.boolean({optional:!0})},{atLeast:[`data`]}),Rt=e=>r.object({where:e.whereUnique,data:e.update,select:e.select,include:e.include},{atLeast:[`where`,`data`]}),zt=e=>r.object({where:e.where,data:e.update},{atLeast:[`data`]}),Bt=e=>r.object({where:e.whereUnique,select:e.select,include:e.include},{atLeast:[`where`]}),Vt=e=>r.object({where:e.where},{optional:!0}),Ht=e=>r.object({where:e.whereUnique,create:e.create,update:e.update,select:e.select,include:e.include},{atLeast:[`where`,`create`,`update`]}),Ut=e=>{let t=Object.keys(e.scalars).filter(t=>!e.fields[t][`~`].state.optional);return r.fromObject(e.scalars,`~.schemas.create`,{atLeast:t})},Wt=e=>r.fromObject(e.relations,`~.schemas.create`);function Gt(e){let t=new Set;for(let n of Object.values(e.relations)){let e=n[`~`]?.state;if(e&&(e.type===`manyToOne`||e.type===`oneToOne`)&&e.fields){let n=Array.isArray(e.fields)?e.fields:[e.fields];for(let e of n)t.add(e)}}return t}const Kt=e=>{let t=Gt(e),n=Object.keys(e.scalars).filter(n=>{if(t.has(n))return!1;let r=e.scalars[n]?.[`~`]?.state;return!(r.hasDefault||r.optional)}),i=r.fromObject(e.scalars,`~.schemas.create`),a=r.fromObject(e.relations,`~.schemas.create`);return r.object({...i.entries,...a.entries},{atLeast:n})},qt=e=>r.fromObject(e.scalars,`~.schemas.filter`),Jt=e=>r.fromObject(e.uniques,`~.schemas.base`),Yt=e=>r.fromObject(e.relations,`~.schemas.filter`),Xt=e=>e.compoundUniques||e.compoundId?e.compoundUniques?e.compoundId?r.object(e.compoundUniques).extend(e.compoundId):r.object(e.compoundUniques):r.object(e.compoundId):r.object({}),Zt=e=>e.compoundId?r.object(e.compoundId):r.object({}),Qt=r.enum([`asc`,`desc`]),$t=r.union([Qt,r.object({sort:Qt,nulls:r.enum([`first`,`last`],{optional:!0})},{partial:!1})]),en=e=>{let t=Object.keys(e.scalars),n=r.fromKeys(t,$t),i=r.fromObject(e.relations,`~.schemas.orderBy`);return r.object({...n.entries,...i.entries})},tn=e=>{let t=Object.keys(e.scalars),n=r.boolean({optional:!0}),i=r.fromKeys(t,n),a=r.fromObject(e.relations,`~.schemas.select`),o=r.fromObject(e.relations,`~.schemas.countFilter`,{optional:!0});return r.object({...i.entries,...a.entries,_count:r.object({select:o},{optional:!0})})},nn=e=>r.fromObject(e.relations,`~.schemas.include`,{optional:!0}),rn=e=>r.fromObject(e.scalars,`~.schemas.update`),an=e=>r.fromObject(e.relations,`~.schemas.update`),on=e=>{let t=r.fromObject(e.scalars,`~.schemas.update`),n=r.fromObject(e.relations,`~.schemas.update`);return t.extend(n.entries)},sn=e=>{let t=r.fromObject(e.scalars,`~.schemas.filter`),n=r.fromObject(e.relations,`~.schemas.filter`),i=r.object({AND:()=>r.optional(r.union([i,r.array(i)])),OR:()=>r.optional(r.array(i)),NOT:()=>r.optional(r.union([i,r.array(i)]))}).extend(t.entries).extend(n.entries);return i},cn=e=>{let t=r.fromObject(e.uniques,`~.schemas.base`),n=Xt(e);return r.object({...t.entries,...n.entries})},ln=e=>{let t=qt(e),n=Jt(e),r=Yt(e),i=Xt(e),a=Zt(e),o=Ut(e),s=Wt(e),c=rn(e),l=an(e),u=tn(e),d=nn(e),f=en(e),p=sn(e),m=cn(e),h=Kt(e),g=on(e),_={where:p,whereUnique:m,create:h,update:g,select:u,include:d,orderBy:f,scalarCreate:o};return{scalarFilter:t,uniqueFilter:n,relationFilter:r,compoundConstraintFilter:i,compoundIdFilter:a,scalarCreate:o,relationCreate:s,scalarUpdate:c,relationUpdate:l,where:p,whereUnique:m,create:h,update:g,select:u,include:d,orderBy:f,args:{findUnique:Nt(_),findFirst:Pt(_),findMany:Ft(e,_),create:It(_),createMany:Lt(_),update:Rt(_),updateMany:zt(_),delete:Bt(_),deleteMany:Vt(_),upsert:Ht(_),count:At(_),aggregate:jt(e,_),groupBy:Mt(e,_)}}},un=(e,t)=>[...e.indexes,t];var dn=class e{constructor(e){this._names={},this._nameRegistry={fields:new Map,relations:new Map},this.state=e}map(t){return new e({...this.state,tableName:t})}omit(t){return new e({...this.state,omit:t})}index(t,n={}){return new e({...this.state,indexes:un(this.state,{fields:t,options:n})})}id(t,n){let i=Dt(n?.name,t),a=t.reduce((e,t)=>{let n=t in this.state.scalars?this.state.scalars[t]:void 0;return n&&(e[t]=n[`~`].schemas.base),e},{}),o={[i]:r.object(a,{partial:!1})};return new e({...this.state,compoundId:o})}unique(t,n){let i=Dt(n?.name,t),a=t.reduce((e,t)=>{let n=t in this.state.scalars?this.state.scalars[t]:void 0;return n&&(e[t]=n[`~`].schemas.base),e},{}),o={[i]:r.object(a,{partial:!1})};return new e({...this.state,compoundUniques:o})}extends(t){let n={...this.state.fields,...t};return new e({...this.state,fields:n,scalars:V(n),relations:H(n),uniques:Et(n)})}get"~"(){return{state:this.state,schemas:ln(this.state),names:this._names,nameRegistry:this._nameRegistry,getFieldName:e=>{let t=this._nameRegistry.fields.get(e);if(!t)throw Error(`Field "${e}" not found in nameRegistry. Schema may not be hydrated.`);return t},getRelationName:e=>{let t=this._nameRegistry.relations.get(e);if(!t)throw Error(`Relation "${e}" not found in nameRegistry. Schema may not be hydrated.`);return t}}}};const fn=e=>new dn({compoundId:void 0,compoundUniques:void 0,tableName:void 0,indexes:[],omit:void 0,fields:e,scalars:V(e),relations:H(e),uniques:Et(e)}),U=(e,t)=>()=>e.getter()[`~`].schemas[t],W=e=>U(e,`where`),G=e=>U(e,`whereUnique`),K=e=>U(e,`create`),pn=e=>U(e,`scalarCreate`),q=e=>U(e,`update`),J=e=>U(e,`select`),mn=e=>U(e,`include`),Y=e=>U(e,`orderBy`),X=e=>r.union([r.coerce(e,e=>[e]),r.array(e)]),hn=e=>r.union([r.literal(!0),r.object({where:W(e)})]),gn=e=>n.object({create:K(e),connect:G(e),connectOrCreate:n.object({where:G(e),create:K(e)})},{optional:!0}),_n=e=>n.object({create:()=>X(K(e)()),createMany:n.object({data:()=>n.array(pn(e)()),skipDuplicates:n.boolean({optional:!0})}),connect:()=>X(G(e)()),connectOrCreate:()=>X(n.object({where:G(e),create:K(e)},{partial:!1}))},{optional:!0}),vn=e=>n.object({is:()=>n.maybeNullable(W(e)(),e.optional),isNot:()=>n.maybeNullable(W(e)(),e.optional)}),yn=e=>n.object({some:W(e),every:W(e),none:W(e)}),bn=e=>Y(e),xn=e=>r.object({_count:r.enum([`asc`,`desc`])}),Sn=e=>{let t=e.getter()[`~`].state,n={},r=new Set(Object.keys(t.omit||{}));for(let e of Object.keys(t.scalars))r.has(e)||(n[e]=!0);return n},Cn=e=>t=>`select`in t&&t.select!==!1?t:{...t,select:Sn(e)},Z=e=>r.coerce(r.boolean(),t=>t?{select:Sn(e)}:{select:!1}),wn=e=>r.union([Z(e),r.object({select:J(e)})]),Tn=e=>r.union([Z(e),r.object({where:W(e),orderBy:Y(e),take:r.number(),skip:r.number(),cursor:r.string(),select:J(e)})]),En=e=>r.union([Z(e),r.coerce(r.object({select:J(e),include:mn(e)}),Cn(e))]),Dn=e=>r.union([Z(e),r.coerce(r.object({where:W(e),orderBy:Y(e),take:r.number(),skip:r.number(),cursor:r.string(),select:J(e),include:mn(e)}),Cn(e))]),On=e=>{let t=K(e),n=q(e),i=G(e),a=r.object({where:i,create:t}),o=r.object({create:t,connect:i,connectOrCreate:a,update:n,upsert:r.object({create:t,update:n})}),s=o.extend({disconnect:r.boolean(),delete:r.boolean()});return e.optional?s:o},kn=e=>{let t=K(e),n=q(e),i=W(e),a=G(e),o=r.object({where:a,data:n}),s=r.object({where:i,data:n}),c=r.object({where:a,create:t,update:n}),l=r.object({where:a,create:t});return r.object({create:()=>X(t()),connect:()=>X(a()),disconnect:()=>r.union([r.boolean(),X(a())]),delete:()=>X(a()),connectOrCreate:X(l),set:()=>X(a()),update:X(o),updateMany:X(s),deleteMany:()=>X(i()),upsert:X(c)})},An=e=>({filter:vn(e),create:gn(e),update:On(e),select:wn(e),include:En(e),orderBy:bn(e),countFilter:hn(e)}),jn=e=>({filter:yn(e),create:_n(e),update:kn(e),select:Tn(e),include:Dn(e),orderBy:xn(e),countFilter:hn(e)}),Q=e=>e.type===`manyToMany`||e.type===`oneToMany`?jn(e):An(e);var Mn=class e{constructor(e){this._state=e}through(t){return new e({...this._state,through:t})}A(t){return new e({...this._state,A:t})}B(t){return new e({...this._state,B:t})}onDelete(t){return new e({...this._state,onDelete:t})}onUpdate(t){return new e({...this._state,onUpdate:t})}name(t){return new e({...this._state,name:t})}get"~"(){return{state:this._state,schemas:this._schemas??=Q(this._state)}}};const Nn=e=>new Mn({type:`manyToMany`,getter:e});var Pn=class e{constructor(e){this._state=e}name(t){return new e({...this._state,name:t})}get"~"(){return{state:this._state,schemas:this._schemas??=Q(this._state)}}};const Fn=e=>new Pn({type:`oneToMany`,getter:e});var $=class e{constructor(e){this._state=e}fields(...t){return new e({...this._state,fields:t})}references(...t){return new e({...this._state,references:t})}optional(){return new e({...this._state,optional:!0})}onDelete(t){return new e({...this._state,onDelete:t})}onUpdate(t){return new e({...this._state,onUpdate:t})}name(t){return new e({...this._state,name:t})}get"~"(){return{state:this._state,schemas:this._schemas??=Q(this._state)}}};const In={model:fn,string:vt,boolean:ve,int:et,float:Ge,decimal:Ie,bigInt:ie,dateTime:ke,json:ot,blob:ue,enum:Ue,vector:Tt,oneToOne:e=>new $({type:`oneToOne`,getter:e}),manyToOne:e=>new $({type:`manyToOne`,getter:e}),oneToMany:Fn,manyToMany:Nn};export{t as NotFoundError,e as createClient,In as s};
//# sourceMappingURL=index.mjs.map